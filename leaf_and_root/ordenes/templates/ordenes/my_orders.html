{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "My Orders" %}{% endblock %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'users/css/auth.css' %}">
<link rel="stylesheet" href="{% static 'store/css/base.css' %}">

<style>
.account-bg {
  background-image: url("{% static 'users/images/veggies.jpg' %}");
}
</style>

<div class="auth-bg account-bg">

  <div class="auth-card">
    <style>
    .auth-card { 
      position: relative; 
      max-width: 900px; /* MÃ¡s grande para la tabla */
      width: 100%;
    }
    .auth-card .back-btn { position: absolute; top: 0.5rem; right: 0.5rem; }
    .table th, .table td { text-align: center; vertical-align: middle; padding: 1rem; }
    </style>

    <a href="{% url 'account_home' %}" class="btn btn-secondary back-btn">{% trans "Back to Account" %}</a>
    <h1 class="auth-title">{% trans "My Orders" %}</h1>

    {% if orders %}
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>{% trans "Order" %}</th>
                    <th>{% trans "Date" %}</th>
                    <th>{% trans "Status" %}</th>
                    <th>{% trans "Total" %}</th>
                    <th>{% trans "Actions" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for order_data in orders %}
                <tr>
                    <td>#{{ order_data.order.id_order }}</td>
                    <td>{{ order_data.order.order_date }}</td>
                    <td>{{ order_data.order.status }}</td>
                    <td>${{ order_data.total }}</td>
                    <td>
                        <a href="{% url 'generate_invoice_pdf' order_data.order.id_order %}" class="btn btn-sm btn-primary" target="_blank">{% trans "Download PDF" %}</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>{% trans "You have no orders yet." %}</p>
    {% endif %}
  </div>
</div>
{% endblock %}
